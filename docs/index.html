<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>root</title><meta name="description" content="Documentation for root"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">root</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>root</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#streamflow" id="streamflow" style="color: inherit; text-decoration: none;">
  <h1>Streamflow</h1>
</a>
<p>Streamflow is a token vesting and streaming payments platform.</p>
<p>There are several ways to use <strong>Streamflow</strong>:</p>
<ul>
<li><strong>(easiest) <a href="https://app.streamflow.finance?utm_medium=github.com&utm_source=referral&utm_campaign=js-sdk-repo">app.streamflow.finance</a></strong> (React application that uses JS SDK directly)</li>
<li><strong><a href="https://github.com/streamflow-finance/js-sdk">JS SDK</a></strong> to interact with the protocol =&gt; <a href="https://www.npmjs.com/package/@streamflow/stream">NPM package</a></li>
<li><strong><a href="https://github.com/streamflow-finance/rust-sdk">Rust SDK</a></strong> to integrate within a Solana program =&gt; <a href="https://docs.rs/streamflow-sdk/">Rust Crate</a></li>
</ul>
<p><strong>Security audit passed âœ…</strong></p>
<p>Protocol audit available <a href="https://github.com/streamflow-finance/rust-sdk/blob/main/protocol_audit.pdf">here</a>.
Partner oracle audit available here <a href="https://github.com/streamflow-finance/rust-sdk/blob/main/partner_oracle_audit.pdf">here</a>.</p>

<a href="#js-sdk-to-interact-with-streamflow-protocol" id="js-sdk-to-interact-with-streamflow-protocol" style="color: inherit; text-decoration: none;">
  <h2>JS SDK to interact with Streamflow protocol.</h2>
</a>
<p>This package allows you to <code>create</code>, <code>createMultiple</code>, <code>withdraw</code>, <code>cancel</code>, <code>topup</code> and <code>transfer</code> SPL token stream.</p>
<p>You can also <code>getOne</code> stream and <code>get</code> multiple streams.</p>

<a href="#docs-httpsstreamflowfinancejs-sdk" id="docs-httpsstreamflowfinancejs-sdk" style="color: inherit; text-decoration: none;">
  <h2>Docs: <a href="https://streamflow.finance/js-sdk/">https://streamflow.finance/js-sdk/</a></h2>
</a>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<p><code>npm i @streamflow/stream @solana/web3.js @project-serum/anchor</code></p>
<blockquote>
<p><em>Anchor is needed for the <code>Wallet</code> type. We plan on removing this dependency in upcoming releases.</em></p>
</blockquote>

<a href="#import-sdk" id="import-sdk" style="color: inherit; text-decoration: none;">
  <h2>Import SDK</h2>
</a>
<p>Most common imports:</p>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">StreamClient</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">Stream</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">CreateParams</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">CreateMultiParams</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">WithdrawParams</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">TransferParams</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">TopupParams</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">CancelParams</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">GetAllParams</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">StreamDirection</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">StreamType</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">Cluster</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">TxResponse</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">CreateResponse</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">BN</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">getBN</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">getNumberFromBN</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@streamflow/stream&quot;</span><span class="hl-1">;</span>
</code></pre>
<p><em>Check the SDK for other types and utility functions.</em></p>

<a href="#create-streamclient-instance" id="create-streamclient-instance" style="color: inherit; text-decoration: none;">
  <h2>Create StreamClient instance</h2>
</a>
<p>Before creating and manipulating streams StreamClient instance must be created.
All streams functions are methods on this instance.</p>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">StreamClient</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@streamflow/stream&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">StreamClient</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">StreamClient</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">Cluster</span><span class="hl-1">.</span><span class="hl-2">Mainnet</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;confirmed&quot;</span><br/><span class="hl-1">);</span>
</code></pre>

<a href="#create-stream" id="create-stream" style="color: inherit; text-decoration: none;">
  <h2>Create stream</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">createStreamParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">sender:</span><span class="hl-1"> </span><span class="hl-2">wallet</span><span class="hl-1">, </span><span class="hl-7">// Wallet/Keypair signing the transaction, creating and sending the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">recipient:</span><span class="hl-1"> </span><span class="hl-3">&quot;4ih00075bKjVg000000tLdk4w42NyG3Mv0000dc0M00&quot;</span><span class="hl-1">, </span><span class="hl-7">// Solana recipient address.</span><br/><span class="hl-1">  </span><span class="hl-2">mint:</span><span class="hl-1"> </span><span class="hl-3">&quot;DNw99999M7e24g99999999WJirKeZ5fQc6KY999999gK&quot;</span><span class="hl-1">, </span><span class="hl-7">// SPL Token mint.</span><br/><span class="hl-1">  </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-8">1643363040</span><span class="hl-1">, </span><span class="hl-7">// Timestamp (in seconds) when the stream/token vesting starts.</span><br/><span class="hl-1">  </span><span class="hl-2">depositedAmount:</span><span class="hl-1"> </span><span class="hl-6">getBN</span><span class="hl-1">(</span><span class="hl-8">100</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">), </span><span class="hl-7">// depositing 100 tokens with 9 decimals mint.</span><br/><span class="hl-1">  </span><span class="hl-2">period:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-7">// Time step (period) in seconds per which the unlocking occurs.</span><br/><span class="hl-1">  </span><span class="hl-2">cliff:</span><span class="hl-1"> </span><span class="hl-8">1643363160</span><span class="hl-1">, </span><span class="hl-7">// Vesting contract &quot;cliff&quot; timestamp in seconds.</span><br/><span class="hl-1">  </span><span class="hl-2">cliffAmount:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">BN</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">), </span><span class="hl-7">// Amount unlocked at the &quot;cliff&quot; timestamp.</span><br/><span class="hl-1">  </span><span class="hl-2">amountPerPeriod:</span><span class="hl-1"> </span><span class="hl-6">getBN</span><span class="hl-1">(</span><span class="hl-8">5</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">), </span><span class="hl-7">// Release rate: how many tokens are unlocked per each period.</span><br/><span class="hl-1">  </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;Transfer to Jane Doe.&quot;</span><span class="hl-1">, </span><span class="hl-7">// The stream name or subject.</span><br/><span class="hl-1">  </span><span class="hl-2">canTopup:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">, </span><span class="hl-7">// setting to FALSE will effectively create a vesting contract.</span><br/><span class="hl-1">  </span><span class="hl-2">cancelableBySender:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-7">// Whether or not sender can cancel the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">cancelableByRecipient:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">, </span><span class="hl-7">// Whether or not recipient can cancel the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">transferableBySender:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-7">// Whether or not sender can transfer the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">transferableByRecipient:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">, </span><span class="hl-7">// Whether or not recipient can transfer the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">automaticWithdrawal:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-7">// Whether or not a 3rd party (e.g. cron job, &quot;cranker&quot;) can initiate a token withdraw/transfer.</span><br/><span class="hl-1">  </span><span class="hl-2">withdrawalFrequency:</span><span class="hl-1"> </span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-7">// Relevant when automatic withdrawal is enabled. If greater than 0 our withdrawor will take care of withdrawals. If equal to 0 our withdrawor will skip, but everyone else can initiate withdrawals.</span><br/><span class="hl-1">  </span><span class="hl-2">partner:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1">, </span><span class="hl-7">//  (optional) Partner&#39;s wallet address (string | null).</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">ixs</span><span class="hl-1">, </span><span class="hl-5">tx</span><span class="hl-1">, </span><span class="hl-5">metadata</span><span class="hl-1"> } = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">create</span><span class="hl-1">(</span><span class="hl-2">createStreamParams</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#create-multiple-streams-at-once" id="create-multiple-streams-at-once" style="color: inherit; text-decoration: none;">
  <h2>Create multiple streams at once</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">recipients</span><span class="hl-1"> = [</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-2">recipient:</span><span class="hl-1"> </span><span class="hl-3">&quot;4ih00075bKjVg000000tLdk4w42NyG3Mv0000dc0M00&quot;</span><span class="hl-1">, </span><span class="hl-7">// Solana recipient address.</span><br/><span class="hl-1">    </span><span class="hl-2">depositedAmount:</span><span class="hl-1"> </span><span class="hl-6">getBN</span><span class="hl-1">(</span><span class="hl-8">100</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">), </span><span class="hl-7">// depositing 100 tokens with 9 decimals mint.</span><br/><span class="hl-1">    </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;January Payroll&quot;</span><span class="hl-1">, </span><span class="hl-7">// The stream name/subject.</span><br/><span class="hl-1">    </span><span class="hl-2">cliffAmount:</span><span class="hl-1"> </span><span class="hl-6">getBN</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">), </span><span class="hl-7">// amount released on cliff for this recipient</span><br/><span class="hl-1">    </span><span class="hl-2">amountPerPeriod:</span><span class="hl-1"> </span><span class="hl-6">getBN</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">) </span><span class="hl-7">//amount released every specified period epoch</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">createMultiStreamsParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">sender:</span><span class="hl-1"> </span><span class="hl-2">wallet</span><span class="hl-1">, </span><span class="hl-7">// Wallet/Keypair signing the transaction, creating and sending the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">recipientsData:</span><span class="hl-1"> </span><span class="hl-2">recipients</span><span class="hl-1">, </span><span class="hl-7">// Array of Solana recipient address.</span><br/><span class="hl-1">  </span><span class="hl-2">mint:</span><span class="hl-1"> </span><span class="hl-3">&quot;DNw99999M7e24g99999999WJirKeZ5fQc6KY999999gK&quot;</span><span class="hl-1">, </span><span class="hl-7">// SPL Token mint.</span><br/><span class="hl-1">  </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-8">1643363040</span><span class="hl-1">, </span><span class="hl-7">// Timestamp (in seconds) when the stream/token vesting starts.</span><br/><span class="hl-1">  </span><span class="hl-2">period:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-7">// Time step (period) in seconds per which the unlocking occurs.</span><br/><span class="hl-1">  </span><span class="hl-2">cliff:</span><span class="hl-1"> </span><span class="hl-8">1643363160</span><span class="hl-1">, </span><span class="hl-7">// Vesting contract &quot;cliff&quot; timestamp in seconds.</span><br/><span class="hl-1">  </span><span class="hl-2">canTopup:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-7">// setting to FALSE will effectively create a vesting contract.</span><br/><span class="hl-1">  </span><span class="hl-2">cancelableBySender:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-7">// Whether or not sender can cancel the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">cancelableByRecipient:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">, </span><span class="hl-7">// Whether or not recipient can cancel the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">transferableBySender:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-7">// Whether or not sender can transfer the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">transferableByRecipient:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">, </span><span class="hl-7">// Whether or not recipient can transfer the stream.</span><br/><span class="hl-1">  </span><span class="hl-2">automaticWithdrawal:</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">, </span><span class="hl-7">// Whether or not a 3rd party can initiate withdraw in the name of recipient (currently not used, set it to FALSE).</span><br/><span class="hl-1">  </span><span class="hl-2">partner:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1">, </span><span class="hl-7">//  (optional) Partner&#39;s wallet address (string | null).</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">txs</span><span class="hl-1"> } = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">createMultiple</span><span class="hl-1">(</span><span class="hl-2">createMultiStreamsParams</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Please note that transaction fees for the scheduled transfers are paid upfront by the stream creator (sender).</p>

<a href="#identifying-created-contracts-streams-or-vesting" id="identifying-created-contracts-streams-or-vesting" style="color: inherit; text-decoration: none;">
  <h2>Identifying created contracts (streams or vesting)</h2>
</a>
<p>Upon creation of a stream, a solana PDA (Program Derrived Address) is created and used to store stream configuration. This account is called &#39;metadata&#39; of a stream. Every stream creation method returns a Keypair used to initialize Metadata. Public key of this Keypair is the unique identifier of that stream.</p>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">ixs</span><span class="hl-1">, </span><span class="hl-5">tx</span><span class="hl-1">, </span><span class="hl-5">metadata</span><span class="hl-1"> } = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">create</span><span class="hl-1">(</span><span class="hl-2">createStreamParams</span><span class="hl-1">);</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">metadata</span><span class="hl-1">.</span><span class="hl-2">publicKey</span><span class="hl-1">.</span><span class="hl-6">toBase58</span><span class="hl-1">()) </span><span class="hl-7">// stream &#39;id&#39;</span>
</code></pre>

<a href="#withdraw-from-stream" id="withdraw-from-stream" style="color: inherit; text-decoration: none;">
  <h2>Withdraw from stream</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">withdrawStreamParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">invoker:</span><span class="hl-1"> </span><span class="hl-2">wallet</span><span class="hl-1">, </span><span class="hl-7">// Wallet/Keypair signing the transaction.</span><br/><span class="hl-1">  </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;AAAAyotqTZZMAAAAmsD1JAgksT8NVAAAASfrGB5RAAAA&quot;</span><span class="hl-1">, </span><span class="hl-7">// Identifier of a stream to be withdrawn from.</span><br/><span class="hl-1">  </span><span class="hl-2">amount:</span><span class="hl-1"> </span><span class="hl-6">getBN</span><span class="hl-1">(</span><span class="hl-8">100</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">), </span><span class="hl-7">// Requested amount to withdraw. If stream is completed, the whole amount will be withdrawn.</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">ixs</span><span class="hl-1">, </span><span class="hl-5">tx</span><span class="hl-1"> } = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">withdraw</span><span class="hl-1">(</span><span class="hl-2">withdrawStreamParams</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#topup-stream" id="topup-stream" style="color: inherit; text-decoration: none;">
  <h2>Topup stream</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">topupStreamParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">invoker:</span><span class="hl-1"> </span><span class="hl-2">wallet</span><span class="hl-1">, </span><span class="hl-7">// Wallet/Keypair signing the transaction.</span><br/><span class="hl-1">  </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;AAAAyotqTZZMAAAAmsD1JAgksT8NVAAAASfrGB5RAAAA&quot;</span><span class="hl-1">, </span><span class="hl-7">// Identifier of a stream to be topped up.</span><br/><span class="hl-1">  </span><span class="hl-2">amount:</span><span class="hl-1"> </span><span class="hl-6">getBN</span><span class="hl-1">(</span><span class="hl-8">100</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">), </span><span class="hl-7">// Specified amount to topup (increases deposited amount).</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">ixs</span><span class="hl-1">, </span><span class="hl-5">tx</span><span class="hl-1"> } = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">topup</span><span class="hl-1">(</span><span class="hl-2">topupStreamParams</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#transfer-stream-to-another-recipient" id="transfer-stream-to-another-recipient" style="color: inherit; text-decoration: none;">
  <h2>Transfer stream to another recipient</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">data</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">invoker:</span><span class="hl-1"> </span><span class="hl-2">wallet</span><span class="hl-1">, </span><span class="hl-7">// Wallet/Keypair signing the transaction.</span><br/><span class="hl-1">  </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;AAAAyotqTZZMAAAAmsD1JAgksT8NVAAAASfrGB5RAAAA&quot;</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-2">recipientId:</span><span class="hl-1"> </span><span class="hl-3">&quot;99h00075bKjVg000000tLdk4w42NyG3Mv0000dc0M99&quot;</span><span class="hl-1">, </span><span class="hl-7">// Identifier of a stream to be transferred.</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">tx</span><span class="hl-1"> } = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">transfer</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#cancel-stream" id="cancel-stream" style="color: inherit; text-decoration: none;">
  <h2>Cancel stream</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">cancelStreamParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">invoker:</span><span class="hl-1"> </span><span class="hl-2">wallet</span><span class="hl-1">, </span><span class="hl-7">// Wallet/Keypair signing the transaction.</span><br/><span class="hl-1">  </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&quot;AAAAyotqTZZMAAAAmsD1JAgksT8NVAAAASfrGB5RAAAA&quot;</span><span class="hl-1">, </span><span class="hl-7">// Identifier of a stream to be canceled.</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">ixs</span><span class="hl-1">, </span><span class="hl-5">tx</span><span class="hl-1"> } = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">cancel</span><span class="hl-1">(</span><span class="hl-2">cancelStreamParams</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#get-one-stream-by-its-id" id="get-one-stream-by-its-id" style="color: inherit; text-decoration: none;">
  <h2>Get one stream by its ID</h2>
</a>
<pre><code class="language-javascript"><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">getOne</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;AAAAyotqTZZMAAAAmsD1JAgksT8NVAAAASfrGB5RAAAA&quot;</span><span class="hl-1"> </span><span class="hl-7">// Identifier of a stream that is fetched.</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#fetching-unlocked-amount" id="fetching-unlocked-amount" style="color: inherit; text-decoration: none;">
  <h2>Fetching unlocked amount</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">getOne</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;AAAAyotqTZZMAAAAmsD1JAgksT8NVAAAASfrGB5RAAAA&quot;</span><br/><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">unlocked</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-6">unlocked</span><span class="hl-1">(</span><span class="hl-2">tsInSeconds</span><span class="hl-1">) </span><span class="hl-7">// bn amount unlocked at the tsInSeconds</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-6">getNumberFromBN</span><span class="hl-1">(</span><span class="hl-2">unlocked</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">))</span>
</code></pre>
<ul>
<li>Note: unlocked amount is determined based on configuration set on creation, no dynamic data is involved so client calculations are correct and no requests to Solana RPC is needed</li>
</ul>

<a href="#reading-withdrawn-amount-and-remaining-funds" id="reading-withdrawn-amount-and-remaining-funds" style="color: inherit; text-decoration: none;">
  <h2>Reading withdrawn amount and remaining funds</h2>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">getOne</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">&quot;AAAAyotqTZZMAAAAmsD1JAgksT8NVAAAASfrGB5RAAAA&quot;</span><br/><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">withdrawn</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-2">withdrawnAmount</span><span class="hl-1"> </span><span class="hl-7">// bn amount withdrawn already</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-6">getNumberFromBN</span><span class="hl-1">(</span><span class="hl-2">wihtdrawn</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">))</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">remaining</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-2">withdrawnAmount</span><span class="hl-1"> </span><span class="hl-7">// bn amount of remaining funds</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-6">getNumberFromBN</span><span class="hl-1">(</span><span class="hl-2">remaining</span><span class="hl-1">, </span><span class="hl-8">9</span><span class="hl-1">))</span><br/>
</code></pre>

<a href="#get-multiple-streams-for-a-specific-wallet-address" id="get-multiple-streams-for-a-specific-wallet-address" style="color: inherit; text-decoration: none;">
  <h2>Get multiple streams for a specific wallet address</h2>
</a>
<pre><code class="language-javascript"><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">streams</span><span class="hl-1"> = </span><span class="hl-2">StreamClient</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-2">wallet:</span><span class="hl-1"> </span><span class="hl-2">wallet</span><span class="hl-1">, </span><span class="hl-7">// Wallet signing the transaction.</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-2">StreamType</span><span class="hl-1">.</span><span class="hl-2">All</span><span class="hl-1">, </span><span class="hl-7">// (optional) Type, default is StreamType.All</span><br/><span class="hl-1">    </span><span class="hl-2">direction:</span><span class="hl-1"> </span><span class="hl-2">StreamDirection</span><span class="hl-1">.</span><span class="hl-2">All</span><span class="hl-1">, </span><span class="hl-7">// (optional) Direction, default is StreamDirection.All)</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">} </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#handling-errors" id="handling-errors" style="color: inherit; text-decoration: none;">
  <h2>Handling errors</h2>
</a>
<p>Protocol returns custom errors on:</p>
<ul>
<li>validation errors</li>
<li>state missmatch errors (such as canceling a stream that is complete/already canceled)</li>
</ul>
<p>Errors are returned per solana specification in hex format such as: 0x60</p>
<p>To interpret these, a public map of protocol errors is available here: <a href="https://streamflow.notion.site/Streamflow-protocol-docs-0accad86d5c44e5db84fd4fb49b8ff54#5a4a1be2226f47b8a63b4aac916d1940">https://streamflow.notion.site/Streamflow-protocol-docs-0accad86d5c44e5db84fd4fb49b8ff54#5a4a1be2226f47b8a63b4aac916d1940</a></p>

<a href="#additional-notes" id="additional-notes" style="color: inherit; text-decoration: none;">
  <h2>Additional notes</h2>
</a>
<p>Default import <code>import Stream from &#39;@streamflow/stream&#39;</code> is an import of older SDK version that uses Anchor and doesn&#39;t support raw instructions, nor multi streams creation.</p>
<p>Streamflow protocol docs -&gt; <a href="https://streamflow.notion.site/Streamflow-protocol-docs-0accad86d5c44e5db84fd4fb49b8ff54">https://streamflow.notion.site/Streamflow-protocol-docs-0accad86d5c44e5db84fd4fb49b8ff54</a></p>
<p>Streamflow protocol program ID (devnet): <code>HqDGZjaVRXJ9MGRQEw7qDc2rAr6iH1n1kAQdCZaCMfMZ</code></p>
<p>Streamflow protocol program ID (mainnet): <code>strmRqUCoQUgGUan5YhzUZa6KqdzwX5L6FpUxfmKg5m</code></p>
<p><strong>All BN amounts are denominated in their smallest units.</strong></p>
<p>E.g, if the amount is 1 SOL than this amount in lamports is <code>1000 \* 10^9 = 1_000_000_000.</code></p>
<p>And <code>new BN(1_000_000_000)</code> is used.</p>
<p>Use <code>getBN</code> and <code>getNumberFromBN</code> utility functions for conversions between <code>BN</code> and <code>Number</code> types.</p>
<p><code>npx typedoc packages/stream/index.ts</code></p>
<p>WAGMI.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">root</a>
<ul>
<li class="tsd-kind-namespace"><a href="modules/StreamflowSolana.html">Streamflow<wbr/>Solana</a>
<ul>
<li class="tsd-kind-namespace tsd-parent-kind-namespace tsd-is-external"><a href="modules/StreamflowSolana.BN.html">BN</a></li></ul></li></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky"></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>